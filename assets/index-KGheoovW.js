(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const w={standard:["@","#","S","%","?","*","+",";",":",",","."],simple:["@","#","+","."],complex:["$","@","B","%","8","&","W","M","#","*","o","a","h","k","b","d","p","q","w","m","Z","O","0","Q","L","C","J","U","Y","X","z","c","v","u","n","x","r","j","f","t","/","\\","|","(",")","1","{","}","[","]","?","-","_","+","~","<",">","i","!","l","I",";",":",",",'"',"^","`","'","."]};function F(t,i,a,c){const n=w[c];let o="";const r=t.width/i,I=t.height/a;for(let s=0;s<a;s++){for(let l=0;l<i;l++){const C=Math.floor(l*r),u=(Math.floor(s*I)*t.width+C)*4,E=t.data[u],O=t.data[u+1],x=t.data[u+2],B=(E+O+x)/3,L=Math.floor(B/255*(n.length-1));o+=n[L]}o+=`
`}return o}let h="standard",m=!0;const e={video:document.getElementById("webcam"),asciiOutput:document.getElementById("asciiOutput"),asciiContainer:document.getElementById("asciiContainer"),captureButton:document.getElementById("captureButton"),charSetSelect:document.getElementById("charSet"),colorSchemeSelect:document.getElementById("colorScheme"),textColorInput:document.getElementById("textColor"),bgColorInput:document.getElementById("bgColor"),fontSizeInput:document.getElementById("fontSize"),fontSizeValue:document.getElementById("fontSizeValue"),asciiToggle:document.getElementById("asciiToggle"),sidebar:document.getElementById("sidebar"),toggleSidebarButton:document.getElementById("toggleSidebar")};async function z(){try{const t=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}});e.video.srcObject=t,e.video.play(),e.video.onloadedmetadata=()=>{requestAnimationFrame(f)}}catch(t){console.error("Error accessing the webcam:",t)}}function f(){const t=document.createElement("canvas"),i=t.getContext("2d");if(i){if(t.width=e.video.videoWidth,t.height=e.video.videoHeight,i.drawImage(e.video,0,0,t.width,t.height),m){const a=i.getImageData(0,0,t.width,t.height),c=F(a,100,50,h);e.asciiOutput.textContent=c,d(),e.asciiOutput.style.display="block",e.video.style.display="none"}else e.asciiOutput.style.display="none",e.video.style.display="block";requestAnimationFrame(f)}}function d(){const t=e.asciiContainer.clientWidth,i=e.asciiContainer.clientHeight,a=e.asciiOutput.clientWidth,c=e.asciiOutput.clientHeight,n=t/a,o=i/c,r=Math.min(n,o);e.asciiOutput.style.transform=`scale(${r})`,e.asciiOutput.style.transformOrigin="top left"}function k(){const t=e.asciiOutput.textContent,i=new Blob([t??""],{type:"text/plain"}),a=URL.createObjectURL(i),c=document.createElement("a");c.href=a,c.download="ascii_capture.txt",c.click(),URL.revokeObjectURL(a)}function A(){h=e.charSetSelect.value}function v(){switch(e.colorSchemeSelect.value){case"greenOnBlack":e.textColorInput.value="#00FF00",e.bgColorInput.value="#000000";break;case"whiteOnBlack":e.textColorInput.value="#FFFFFF",e.bgColorInput.value="#000000";break;case"blackOnWhite":e.textColorInput.value="#000000",e.bgColorInput.value="#FFFFFF";break}y()}function y(){e.asciiOutput.style.color=e.textColorInput.value,e.asciiOutput.style.backgroundColor=e.bgColorInput.value}function S(){const t=e.fontSizeInput.value;e.asciiOutput.style.fontSize=`${t}px`,e.asciiOutput.style.lineHeight=`${t}px`,e.fontSizeValue.textContent=`${t}px`,d()}function W(){m=e.asciiToggle.checked}function b(){e.colorSchemeSelect.value="custom",y()}function H(){e.sidebar.classList.toggle("-translate-x-full")}z();var p;(p=e.captureButton)==null||p.addEventListener("click",k);e.charSetSelect.addEventListener("change",A);e.colorSchemeSelect.addEventListener("change",v);e.textColorInput.addEventListener("input",b);e.bgColorInput.addEventListener("input",b);e.fontSizeInput.addEventListener("input",S);e.asciiToggle.addEventListener("change",W);var g;(g=e.toggleSidebarButton)==null||g.addEventListener("click",H);v();S();window.addEventListener("resize",()=>{window.innerWidth>=640&&e.sidebar.classList.remove("-translate-x-full"),d()});
